<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Wl_shm_pool (wayland.Wayland__.Wayland_client.Wl_shm_pool)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">wayland</a> &#x00BB; <a href="../../index.html">Wayland__</a> &#x00BB; <a href="../index.html">Wayland_client</a> &#x00BB; Wl_shm_pool</nav><h1>Module <code>Wayland_client.Wl_shm_pool</code></h1><p>A shared memory pool.</p><p>The wl_shm_pool object encapsulates a piece of memory shared between the compositor and client. Through the wl_shm_pool object, the client can allocate shared memory wl_buffer objects. All objects created through the same pool share the same underlying mapped memory. Reusing the mapped memory avoids the setup/teardown overhead and is useful when interactively resizing a surface or for many small buffers.</p><nav class="toc"><ul><li><a href="#version-1">Version 1</a></li><li><a href="#handlers">Handlers</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'v t</span></code><code> = <span><span>(<span>[ `Wl_shm_pool ]</span>, <span class="type-var">'v</span>, <span>[ `Client ]</span>)</span> <a href="../../../Wayland/Proxy/index.html#type-t">Wayland.Proxy.t</a></span></code></dt></dl><section><header><h3 id="version-1"><a href="#version-1" class="anchor"></a>Version 1</h3></header><dl><dt class="spec value" id="val-resize"><a href="#val-resize" class="anchor"></a><code><span class="keyword">val</span> resize : <span><span>[&lt; `V1 ]</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>size:int32</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Change the size of the pool mapping.</p><p>This request will cause the server to remap the backing memory for the pool from the file descriptor passed when the pool was created, but using the new size. This request can only be used to make the pool bigger.</p></dd></dl><dl><dt class="spec value" id="val-destroy"><a href="#val-destroy" class="anchor"></a><code><span class="keyword">val</span> destroy : <span><span>[&lt; `V1 ]</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Destroy the pool.</p><p>Destroy the shared memory pool.</p><p>The mmapped memory will be released when all buffers that have been created from this pool are gone.</p></dd></dl><dl><dt class="spec value" id="val-create_buffer"><a href="#val-create_buffer" class="anchor"></a><code><span class="keyword">val</span> create_buffer : <span><span>[&lt; `V1 ]</span> <span class="keyword">as</span> 'a <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>[<span>[ `Wl_buffer ]</span>, <span class="type-var">'a</span>, <span>[ `Client ]</span>]</span> <a href="../../../Wayland/Proxy/Handler/class-type-t/index.html">Wayland.Proxy.Handler.t</a></span> <span>&#45;&gt;</span> <span>offset:int32</span> <span>&#45;&gt;</span> <span>width:int32</span> <span>&#45;&gt;</span> <span>height:int32</span> <span>&#45;&gt;</span> <span>stride:int32</span> <span>&#45;&gt;</span> <span>format:<a href="../$Open__4_95/index.html#module-$Imports">$Imports</a>.Wl_shm.Format.t</span> <span>&#45;&gt;</span> <span><span>(<span>[ `Wl_buffer ]</span>, <span class="type-var">'a</span>, <span>[ `Client ]</span>)</span> <a href="../../../Wayland/Proxy/index.html#type-t">Wayland.Proxy.t</a></span></code></dt><dd><p>Create a buffer from the pool.</p><p>Create a wl_buffer object from the pool.</p><p>The buffer is created offset bytes into the pool and has width and height as specified. The stride argument specifies the number of bytes from the beginning of one row to the beginning of the next. The format is the pixel format of the buffer and must be one of those advertised through the wl_shm.format event.</p><p>A buffer will keep a reference to the pool it was created from so it is valid to destroy the pool immediately after creating a buffer from it.</p></dd></dl></section><section><header><h3 id="handlers"><a href="#handlers" class="anchor"></a>Handlers</h3><p>Note: Servers will always want to use <code>v1</code>.</p></header><dl><dt class="spec class" id="class-v1"><a href="#class-v1" class="anchor"></a><code><span class="keyword">class</span> +'a <a href="class-v1/index.html">v1</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Handler for a proxy with version &gt;= 1.</p></dd></dl></section></div></body></html>