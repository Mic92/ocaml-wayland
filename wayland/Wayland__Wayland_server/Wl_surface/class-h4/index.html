<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>h4 (wayland.Wayland__Wayland_server.Wl_surface.h4)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">wayland</a> &#x00BB; <a href="../../index.html">Wayland__Wayland_server</a> &#x00BB; <a href="../index.html">Wl_surface</a> &#x00BB; h4</nav><h1>Class <code>Wl_surface.h4</code></h1></header><dl><dt><code><span class="keyword">inherit</span> <a href="../class-h3/index.html">h3</a></code></dt></dl><dl><dt class="spec method" id="method-on_damage_buffer"><a href="#method-on_damage_buffer" class="anchor"></a><code><span class="keyword">method</span> <span class="keyword">virtual</span> on_damage_buffer : <span><span class="type-var">'v</span> <a href="../index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>x:int32</span> <span>&#45;&gt;</span> <span>y:int32</span> <span>&#45;&gt;</span> <span>width:int32</span> <span>&#45;&gt;</span> <span>height:int32</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Mark part of the surface damaged using buffer coordinates.</p><p>This request is used to describe the regions where the pending buffer is different from the current surface contents, and where the surface therefore needs to be repainted. The compositor ignores the parts of the damage that fall outside of the surface.</p><p>Damage is double-buffered state, see wl_surface.commit.</p><p>The damage rectangle is specified in buffer coordinates, where x and y specify the upper left corner of the damage rectangle.</p><p>The initial value for pending damage is empty: no damage. wl_surface.damage_buffer adds pending damage: the new pending damage is the union of old pending damage and the given rectangle.</p><p>wl_surface.commit assigns pending damage as the current damage, and clears pending damage. The server will clear the current damage as it repaints the surface.</p><p>This request differs from wl_surface.damage in only one way - it takes damage in buffer coordinates instead of surface-local coordinates. While this generally is more intuitive than surface coordinates, it is especially desirable when using wp_viewport or when a drawing library (like EGL) is unaware of buffer scale and buffer transform.</p><p>Note: Because buffer transformation changes and damage requests may be interleaved in the protocol stream, it is impossible to determine the actual mapping between surface and buffer damage until wl_surface.commit time. Therefore, compositors wishing to take both kinds of damage into account will have to accumulate damage from the two requests separately and only transform from one to the other after receiving the wl_surface.commit.</p></dd></dl></div></body></html>